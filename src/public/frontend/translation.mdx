---
route: /frontend/translation
name: service
menu: Frontend
---

MetaFox translation based on [react-intl](https://formatjs.io/docs/getting-started/installation/)

## Translation File

A package has its translation messages file named at root package source `messages.json`, it contains all message and translation value.

etc: `blog/src/messages.json`

```json
{
    "draft_tag": "[Draft]",
    "no_blog_found": "No Blogs Found",
    "blog_is_waiting_approve": "This blog post is waiting for approval",
    "approve": "Approve",
    "decline": "Decline",
    "name_type_blog": "Blog",
    "total_comment": "{ value, plural, =1{# comment} other{# comments} }",
}
```

MetaFox bundle service combine all messages.json file in to single bundle `./app/src/bundle/messages.json`. Web app will load bundled message file
instead of many package `messages.json` file.


## Component Translation

```tsx

import { useGlobal } from '@metafox/framework';

export function MyComponent(){
    const {i18n} = useGlobal();

    const msg = i18n.formatMessage({id: 'hello_wolrd'})

return (
    <div>
        {msg}
    </div>
    )
}
```

## Saga translation

```tsx
import {getGlobalContext} from '@metafox/framework'

export function * mySaga (){
    const {i18n} = yield * getGlobalContext();
    const msg = i18n.formatMessage({id: 'hello_wolrd'})
}
```


## IntShape

```tsx
export interface IntlFormatters<T = any, R = T> {
    formatDateTimeRange(from: Parameters<DateTimeFormat['formatRange']>[0], to: Parameters<DateTimeFormat['formatRange']>[1], opts?: FormatDateOptions): string;
    formatDate(value: Parameters<Intl.DateTimeFormat['format']>[0] | string, opts?: FormatDateOptions): string;
    formatTime(value: Parameters<Intl.DateTimeFormat['format']>[0] | string, opts?: FormatDateOptions): string;
    formatDateToParts(value: Parameters<Intl.DateTimeFormat['format']>[0] | string, opts?: FormatDateOptions): Intl.DateTimeFormatPart[];
    formatTimeToParts(value: Parameters<Intl.DateTimeFormat['format']>[0] | string, opts?: FormatDateOptions): Intl.DateTimeFormatPart[];
    formatRelativeTime(value: Parameters<Intl.RelativeTimeFormat['format']>[0], unit?: Parameters<Intl.RelativeTimeFormat['format']>[1], opts?: FormatRelativeTimeOptions): string;
    formatNumber(value: Parameters<Intl.NumberFormat['format']>[0], opts?: FormatNumberOptions): string;
    formatNumberToParts(value: Parameters<Intl.NumberFormat['format']>[0], opts?: FormatNumberOptions): Intl.NumberFormatPart[];
    formatPlural(value: Parameters<Intl.PluralRules['select']>[0], opts?: FormatPluralOptions): ReturnType<Intl.PluralRules['select']>;
    formatMessage(descriptor: MessageDescriptor, values?: Record<string, PrimitiveType | FormatXMLElementFn<string, string>>, opts?: IntlMessageFormatOptions): string;
    formatMessage(descriptor: MessageDescriptor, values?: Record<string, PrimitiveType | T | FormatXMLElementFn<T, R>>, opts?: IntlMessageFormatOptions): R;
    $t(descriptor: MessageDescriptor, values?: Record<string, PrimitiveType | FormatXMLElementFn<string, string>>, opts?: IntlMessageFormatOptions): string;
    $t(descriptor: MessageDescriptor, values?: Record<string, PrimitiveType | T | FormatXMLElementFn<T, R>>, opts?: IntlMessageFormatOptions): R;
    formatList(values: ReadonlyArray<string>, opts?: FormatListOptions): string;
    formatList(values: ReadonlyArray<string | T>, opts?: FormatListOptions): T | string | Array<string | T>;
    formatListToParts(values: ReadonlyArray<string | T>, opts?: FormatListOptions): Part[];
    formatDisplayName(value: Parameters<DisplayNames['of']>[0], opts: FormatDisplayNameOptions): string | undefined;
}
```


## ICU Message


In the example above , key "total_comment" return `{ value, plural, =1{# comment} other{# comments} }`, this is an icu message format.

ICU message support custom params, plural, date time, number, choice and all globalization needed function.

read [icu message for more information](https://unicode-org.github.io/icu/userguide/format_parse/)

a complex example of icu message:

```tsx
"{gender_of_host, select, "
  "female {"
    "{num_guests, plural, offset:1 "
      "=0 {{host} does not give a party.}"
      "=1 {{host} invites {guest} to her party.}"
      "=2 {{host} invites {guest} and one other person to her party.}"
      "other {{host} invites {guest} and # other people to her party.}}}"
  "male {"
    "{num_guests, plural, offset:1 "
      "=0 {{host} does not give a party.}"
      "=1 {{host} invites {guest} to his party.}"
      "=2 {{host} invites {guest} and one other person to his party.}"
      "other {{host} invites {guest} and # other people to his party.}}}"
  "other {"
    "{num_guests, plural, offset:1 "
      "=0 {{host} does not give a party.}"
      "=1 {{host} invites {guest} to their party.}"
      "=2 {{host} invites {guest} and one other person to their party.}"
      "other {{host} invites {guest} and # other people to their party.}}}}"
```


## Multiple Language

In order to support custom translation and multiple language, MetaFox support backend translation from admincp and frontend will load custom translation via api call
```/api/core/translation/web/{lang}`.


